{% include "include/header.html" %} 
{% load static %}
{% load custom_tags %}
<div >
  {% include 'include/navbar.html' %}
</div>

<div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
  <ol class="carousel-indicators">
    <li
      data-target="#carouselExampleIndicators"
      data-slide-to="0"
      class="active"
    ></li>
    <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
    <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
  </ol>
  <div class="carousel-inner">
    <div class="carousel-item active">
      <img
        class="d-block w-100"
        src="{% static 'images/4.jpg' %}"
        alt="First slide"
      />
    </div>
    <div class="carousel-item">
      <img
        class="d-block w-100"
        src="{% static 'images/5.jpg' %}"
        alt="Second slide"
      />
    </div>
  </div>
  <a
    class="carousel-control-prev"
    href="#carouselExampleIndicators"
    role="button"
    data-slide="prev"
  >
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="sr-only">Previous</span>
  </a>
  <a
    class="carousel-control-next"
    href="#carouselExampleIndicators"
    role="button"
    data-slide="next"
  >
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="sr-only">Next</span>
  </a>
</div>



<section>
  <div class="container">

    <section id="tabs" class="maintab-tab">
      <div class="container">
          <div class="row">
              <div class="col-md-12">
                  <nav>
                      <div class="nav nav-tabs nav-fill" id="nav-tab" role="tablist">
                          <a class="nav-item nav-link active" id="nav-home-tab" data-toggle="tab" href="#nav-home" role="tab" aria-controls="nav-home" aria-selected="true">All Rides</a>
                          <a class="nav-item nav-link" id="nav-profile-tab" data-toggle="tab" href="#nav-profile" role="tab" aria-controls="nav-profile" aria-selected="false">Accepted Rides</a>
                          <!-- <a class="nav-item nav-link" id="nav-contact-tab" data-toggle="tab" href="#nav-contact" role="tab" aria-controls="nav-contact" aria-selected="false">Project Tab 3</a> -->
                      </div>
                  </nav>
                  <div class="tab-content" id="nav-tabContent">
                      <div class="tab-pane fade show active" id="nav-home" role="tabpanel" aria-labelledby="nav-home-tab">
                     
                        <section>
                          <div class="text-center mt-5">
                            <h2>Ride Requests</h2>
                          </div>
                          <!-- {% for request in rideRequests %}
                          <div class="container py-4">
                            <div class="row">
                              <div class="col-12">
                                <div class="card mb-3">
                                  <div class="d-flex">
                                    <img
                                      class="card-img-top"
                                      src="{% static 'images/2.jpg' %}"
                                      alt="Card image cap"
                                    />
                                    <div class="card-body">
                                      <h5 class="card-title">{{request.rider.name|upper}}</h5>
                                      <p class="card-text">
                                        ADDRESS: {{request.rider.address}}
                                        <br />
                                        Phone: {{request.rider.phone}}
                                        <br />
                                        Requested Ride Day: {{request.ride_day}}
                                        <br/>
                                      </p>
                        
                                      <div class="d-flex justify-content-between">
                                        <p class="card-text">
                                          <span class="text">Estimate Cost:{{request.driver.charge_per_km|multiply:6}} PKR</span
                                          >
                                        </p>
                                        <form method="POST">
                                          {% csrf_token %}
                                          <input type="hidden" name="request_id" value="{{request.id}}">
                                          <button class="btn btn-success"
                                          type="submit" name="status" value="ACCEPT">
                                            ACCEPT REQUEST
                                          </button>
                                          <button class="btn btn-danger"
                                            type="submit" name="status" value="REJECT">
                                            REJECT REQUEST
                                          </button>
                                        </form>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                          {% endfor %} -->



                          {% for request in rideRequests %}
                          <div class="card">

                            <div class="card-header">
                              
                              <div class="d-flex justify-content-between align-items-center">
                                <div class="d-flex align-items-center ">
                          
                                  <div>
                                    <img src="{% static 'images/2.jpg' %}" alt=""
                                      style="height: 80px ;width: 80px;margin-right: 20px;">
                                  </div>
                          
                                  <div>
                                    <h5 class="card-title">{{request.rider.name|upper}}</h5>
                              
                                  </div>
                          
                          
                                </div>
                          
                          
                          
                          
                                <div>
                                  <form method="POST">
                                    {% csrf_token %}
                                    <input type="hidden" name="request_id" value="{{request.id}}">
                                    <button class="btn btn-success"
                                    type="submit" name="status" value="ACCEPT">
                                      ACCEPT REQUEST
                                    </button>
                                    <button class="btn btn-danger"
                                      type="submit" name="status" value="REJECT">
                                      REJECT REQUEST
                                    </button>
                                  </form>
                                </div>
                          
                          
                          
                              </div>
                          
                           
                            </div>
                          
                            <div class="card-body">
                          
                              <div class="d-flex justify-content-between">
                          
                                <div>
                                  <p class="card-text">
                                    ADDRESS: {{request.rider.address}}
                                    <br />
                                    Phone: {{request.rider.phone}}
                                    <br />
                                    Requested Ride Day: {{request.ride_day}}
                                    <br/>
                                    {% if request.return_trip %}
                                    Round Trip: Yes
                                    {% else %}
                                    Round Trip: No
                                    {% endif %}
                                  </p>
                                </div>
                          
                                <div>
                                  <p style="background-color: rgb(5, 56, 0);border-radius: 200px;color: rgb(255, 255, 255);padding: 20px;">Estimate Cost
                                    : 60 pkr</p>
                                </div>
                          
                              </div>
                          
                            </div>
                          </div>





{% endfor %}






                        </section>



                      </div>
                      <div class="tab-pane fade" id="nav-profile" role="tabpanel" aria-labelledby="nav-profile-tab">

                        <div class="text-center my-5">
                          <h2>Accepted  Rides</h2>
                        </div>
                        {% include 'include/messages.html' %}
                          <table class="table" cellspacing="0">
                              <thead>
                                  <tr>
                                      <th>Rider</th>
                                      <th>Location</th>
                                      <th>Day</th>
                                      <th>Action</th>
                                  </tr>
                              </thead>
                              <tbody>
                                {% for ride in acceptedRideRequest %}
                                  <tr>
                                      <td><a href="#">{{ride.rider.name}}</a></td>
                                      <td>{{ride.rider.address}}</td>
                                      <td>{{ride.ride_day}}</td>
                                      <td>
                                        <div style="display: inline-block; width: auto;">
                                          <form method="POST" style="display: inline;">
                                            {% csrf_token %}
                                            <input type="hidden" name="request_id" value="{{ride.id}}">
                                            <button class="btn btn-danger" type="submit" name="status" value="CANCEL">
                                              CANCEL RIDE
                                            </button>
                                          </form>
                                          <button class="btn btn-success" onclick="location.href='/startRide/?location={{ride.rider.address}}&rider={{ride.rider.user.id}}'">
                                            START RIDE
                                          </button>
                                        </div>
                                      </td>                                      
                                  </tr>
                                {% endfor %}
                              </tbody>
                          </table>
                      </div>
                     </div>
              </div>
          </div>
      </div>
  </section>
  </div>
  <!-- Tabs content -->
</section>


{% include "include/footer.html" %}
